<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Activity 6</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
    <link rel="stylesheet" href="login.css">
  </head>
  <body>
    <div class="container">
      <h5 class="text-center">Account Management System</h5>
      <form class="mx-auto" id="loginForm">
        <h4 class="text-center mb-5">Login</h3>
        <div class="result" id="result"></div>
        <div class="mb-3" >
          <label for="email_input" class="form-label">Email address</label>
          <input type="email" class="form-control" id="email_input" name="email_input" aria-describedby="emailHelp" placeholder="Enter email address" required>
          <div class="form-text">We'll never share your email with anyone else.</div>
        </div>
        <div class="mb-3">
          <label for="password_input" class="form-label">Password</label>
          <input type="password" class="form-control" id="password_input" name="password_input" placeholder="Enter password" required>
        </div>
        <div class="mb-5">
          <p><a href="/register/register.html">Register your account</a></p>
        </div>
        <button type="submit" class="btn btn-primary rounded-3 w-100">Login</button>
      </form>

    </div>

  <script>
    
    let resultDiv = document.getElementById('result');
    
    function displaySuccessMessage() {

      deleteResultDiv();

      let successDiv = document.createElement('div');
        successDiv.classList.add('alert', 'alert-success');
        successDiv.textContent = 'Successfully logged in.';

        resultDiv.appendChild(successDiv);
    }

    function displayErrorMessage() {

      deleteResultDiv();

      let errorDiv = document.createElement('div');
      errorDiv.classList.add('alert', 'alert-danger');
      errorDiv.textContent = 'Invalid email or password.';

      resultDiv.appendChild(errorDiv);
    }

    function deleteResultDiv() {

      // for (let resultDiv of result) {
      //   let element = resultDiv[result];
			// 	element.parentNode.removeChild(element);

      while (resultDiv.firstChild) {
        resultDiv.removeChild(resultDiv.firstChild);
      }
    }

    function handleLoginFormSubmit(event) {
      event.preventDefault(); //default

      // fetch inputs
      let email = document.getElementById('email_input').value;
      let password = document.getElementById('password_input').value;

      // Check if email and password match the desired credentials
      if (email === 'admin@email.com' && password === 'password') {
        deleteResultDiv();
        displaySuccessMessage();
        } 
        else {
          deleteResultDiv();
          displayErrorMessage();
        }
}

document.getElementById('loginForm').addEventListener('submit', handleLoginFormSubmit);

</script>
    
</body>
</html>